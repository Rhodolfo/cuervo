parse(text = paste0(
funcion1,
funcion2,
funcion3
))
library(shinydashboard)
library(stringr)
library(shinyWidgets)
library(readr)
library(readxl)
library(ggplot2)
library(lubridate)
library(formattable)
library(plyr)
library(dplyr)
library(RColorBrewer)
source('gs.R', encoding = "UTF-8")
# source('proceso.R', encoding = "UTF-8")
# source('grafica_fill_rate.R', encoding = "UTF-8")
# source('mapa.R', encoding = "UTF-8")
source('funciones_de_carga.R', encoding = "UTF-8")
source('funciones_graficas.R', encoding = "UTF-8")
excel_parametros <- read_excel('datos/setup/parametros.xlsx') %>% data.frame
for(i in 1:nrow(excel_parametros)){
for(j in 1:length(excel_parametros)){
excel_parametros[i,j] <- str_replace_all(excel_parametros[i,j],' ','_')
}
}
parametros <- list()
parametros$domestico_fechas = excel_parametros %>%
dplyr::filter(!is.na(domestico_fechas)) %>%
dplyr::select(domestico_fechas) %>%
unlist
parametros$usa_fechas = excel_parametros %>%
dplyr::filter(!is.na(usa_fechas)) %>%
dplyr::select(usa_fechas) %>%
unlist
parametros$row_fechas = excel_parametros %>%
dplyr::filter(!is.na(row_fechas)) %>%
dplyr::select(row_fechas) %>%
unlist
parametros$domestico_cantidades = excel_parametros %>%
dplyr::filter(!is.na(domestico_cantidades)) %>%
dplyr::select(domestico_cantidades) %>%
unlist
parametros$usa_cantidades = excel_parametros %>%
dplyr::filter(!is.na(usa_cantidades)) %>%
dplyr::select(usa_cantidades) %>%
unlist
parametros$row_cantidades = excel_parametros %>%
dplyr::filter(!is.na(row_cantidades)) %>%
dplyr::select(row_cantidades) %>%
unlist
parametros$domestico_filtros = excel_parametros %>%
dplyr::filter(!is.na(domestico_filtros)) %>%
dplyr::select(domestico_filtros) %>%
unlist
parametros$usa_filtros = excel_parametros %>%
dplyr::filter(!is.na(usa_filtros)) %>%
dplyr::select(usa_filtros) %>%
unlist
parametros$row_filtros = excel_parametros %>%
dplyr::filter(!is.na(row_filtros)) %>%
dplyr::select(row_filtros) %>%
unlist
parametros$usa_carpeta = excel_parametros %>%
dplyr::filter(!is.na(usa_carpeta)) %>%
dplyr::select(usa_carpeta) %>%
unlist
parametros$row_carpeta = excel_parametros %>%
dplyr::filter(!is.na(row_carpeta)) %>%
dplyr::select(row_carpeta) %>%
unlist
parametros$domestico_carpeta = excel_parametros %>%
dplyr::filter(!is.na(domestico_carpeta)) %>%
dplyr::select(domestico_carpeta) %>%
unlist
parametros$usa_pedido = excel_parametros %>%
dplyr::filter(!is.na(usa_pedido)) %>%
dplyr::select(usa_pedido) %>%
unlist
parametros$row_pedido = excel_parametros %>%
dplyr::filter(!is.na(row_pedido)) %>%
dplyr::select(row_pedido) %>%
unlist
parametros$domestico_pedido = excel_parametros %>%
dplyr::filter(!is.na(domestico_pedido)) %>%
dplyr::select(domestico_pedido) %>%
unlist
tablas$domestico <- funcion_cargar_datos(parametros$domestico_carpeta,parametros$domestico_fechas,parametros$domestico_cantidades,parametros$domestico_filtros,parametros$domestico_pedido)
lista_opciones <- list()
for(i in 1:length(parametros$domestico_filtros)){
eval(parse(text=paste0(
'lista_opciones[[',i,']] <- unique(tablas$domestico$',parametros$domestico_filtros[i],')'
)))
}
vector_opciones <- NULL
for(i in 1:length(lista_opciones)){
lista_opciones[[i]] <- paste0('"',paste0(lista_opciones[[i]],collapse = '","'),'"')
vector_opciones <- c(vector_opciones,lista_opciones[[i]])
}
funcion1 <- 'tagList('
funcion2 <- paste0(funcion2,collapse = ',')
funcion3 <- ')'
funcion2 <- paste0(
'div(style="display:inline-block",
pickerInput(
"input_filtro_',parametros$domestico_filtros,'",
"',parametros$domestico_filtros,'",
selected = NULL,
multiple = TRUE,
choices = c(',
vector_opciones
,')))'
)
resultado <- eval(parse(text = paste0(
funcion1,
funcion2,
funcion3
)))
runApp()
runApp()
runApp()
names(tablas$domestico)
parametros <- list()
parametros$domestico_fechas = excel_parametros %>%
dplyr::filter(!is.na(domestico_fechas)) %>%
dplyr::select(domestico_fechas) %>%
unlist
parametros$usa_fechas = excel_parametros %>%
dplyr::filter(!is.na(usa_fechas)) %>%
dplyr::select(usa_fechas) %>%
unlist
parametros$row_fechas = excel_parametros %>%
dplyr::filter(!is.na(row_fechas)) %>%
dplyr::select(row_fechas) %>%
unlist
parametros$domestico_cantidades = excel_parametros %>%
dplyr::filter(!is.na(domestico_cantidades)) %>%
dplyr::select(domestico_cantidades) %>%
unlist
parametros$usa_cantidades = excel_parametros %>%
dplyr::filter(!is.na(usa_cantidades)) %>%
dplyr::select(usa_cantidades) %>%
unlist
parametros$row_cantidades = excel_parametros %>%
dplyr::filter(!is.na(row_cantidades)) %>%
dplyr::select(row_cantidades) %>%
unlist
parametros$domestico_filtros = excel_parametros %>%
dplyr::filter(!is.na(domestico_filtros)) %>%
dplyr::select(domestico_filtros) %>%
unlist
parametros$usa_filtros = excel_parametros %>%
dplyr::filter(!is.na(usa_filtros)) %>%
dplyr::select(usa_filtros) %>%
unlist
parametros$row_filtros = excel_parametros %>%
dplyr::filter(!is.na(row_filtros)) %>%
dplyr::select(row_filtros) %>%
unlist
parametros$usa_carpeta = excel_parametros %>%
dplyr::filter(!is.na(usa_carpeta)) %>%
dplyr::select(usa_carpeta) %>%
unlist
parametros$row_carpeta = excel_parametros %>%
dplyr::filter(!is.na(row_carpeta)) %>%
dplyr::select(row_carpeta) %>%
unlist
parametros$domestico_carpeta = excel_parametros %>%
dplyr::filter(!is.na(domestico_carpeta)) %>%
dplyr::select(domestico_carpeta) %>%
unlist
parametros$usa_pedido = excel_parametros %>%
dplyr::filter(!is.na(usa_pedido)) %>%
dplyr::select(usa_pedido) %>%
unlist
parametros$row_pedido = excel_parametros %>%
dplyr::filter(!is.na(row_pedido)) %>%
dplyr::select(row_pedido) %>%
unlist
parametros$domestico_pedido = excel_parametros %>%
dplyr::filter(!is.na(domestico_pedido)) %>%
dplyr::select(domestico_pedido) %>%
unlist
library(shinydashboard)
library(stringr)
library(shinyWidgets)
library(readr)
library(readxl)
library(ggplot2)
library(lubridate)
library(formattable)
library(plyr)
library(dplyr)
library(RColorBrewer)
source('gs.R', encoding = "UTF-8")
# source('proceso.R', encoding = "UTF-8")
# source('grafica_fill_rate.R', encoding = "UTF-8")
# source('mapa.R', encoding = "UTF-8")
source('funciones_de_carga.R', encoding = "UTF-8")
source('funciones_graficas.R', encoding = "UTF-8")
source('funciones_interfaz.R', encoding = "UTF-8")
excel_parametros <- read_excel('datos/setup/parametros.xlsx') %>% data.frame
for(i in 1:nrow(excel_parametros)){
for(j in 1:length(excel_parametros)){
excel_parametros[i,j] <- str_replace_all(excel_parametros[i,j],' ','_')
}
}
library(shinydashboard)
library(stringr)
library(shinyWidgets)
library(readr)
library(readxl)
library(ggplot2)
library(lubridate)
library(formattable)
library(plyr)
library(dplyr)
library(RColorBrewer)
source('gs.R', encoding = "UTF-8")
# source('proceso.R', encoding = "UTF-8")
# source('grafica_fill_rate.R', encoding = "UTF-8")
# source('mapa.R', encoding = "UTF-8")
source('funciones_de_carga.R', encoding = "UTF-8")
source('funciones_graficas.R', encoding = "UTF-8")
source('funciones_interfaz.R', encoding = "UTF-8")
excel_parametros <- read_excel('datos/setup/parametros.xlsx') %>% data.frame
for(i in 1:nrow(excel_parametros)){
for(j in 1:length(excel_parametros)){
excel_parametros[i,j] <- str_replace_all(excel_parametros[i,j],' ','_')
}
}
tablas$domestico <- funcion_cargar_datos(parametros$domestico_carpeta,parametros$domestico_fechas,parametros$domestico_cantidades,parametros$domestico_filtros,parametros$domestico_pedido)
tablas <- list()
tablas$domestico <- funcion_cargar_datos(parametros$domestico_carpeta,parametros$domestico_fechas,parametros$domestico_cantidades,parametros$domestico_filtros,parametros$domestico_pedido)
tablas$usa <- funcion_cargar_datos(parametros$usa_carpeta,parametros$usa_fechas,parametros$usa_cantidades,parametros$usa_filtros,parametros$usa_pedido) %>%
dplyr::filter(!is.na(Zona_de_ventas)) %>%
dplyr::filter(Nombre_Región == 'USA')
tablas$row <- funcion_cargar_datos(parametros$row_carpeta,parametros$row_fechas,parametros$row_cantidades,parametros$row_filtros,parametros$row_pedido) %>%
dplyr::filter(!is.na(Zona_de_ventas)) %>%
dplyr::filter(Nombre_Región != 'USA')
runApp()
runApp()
parse(text=paste0("parametros$",f_region,"_filtros[i]"))
f_region <- 'usa'
parse(text=paste0("parametros$",f_region,"_filtros[i]"))
i=1
parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[',i,']] <- unique(tablas$',f_region,'$',eval(parse(text=paste0("parametros$",f_region,"_filtros[i]"))),')}'))
library(shinydashboard)
library(stringr)
library(shinyWidgets)
library(readr)
library(readxl)
library(ggplot2)
library(lubridate)
library(formattable)
library(plyr)
library(dplyr)
library(RColorBrewer)
source('gs.R', encoding = "UTF-8")
# source('proceso.R', encoding = "UTF-8")
# source('grafica_fill_rate.R', encoding = "UTF-8")
# source('mapa.R', encoding = "UTF-8")
source('funciones_de_carga.R', encoding = "UTF-8")
source('funciones_graficas.R', encoding = "UTF-8")
source('funciones_interfaz.R', encoding = "UTF-8")
excel_parametros <- read_excel('datos/setup/parametros.xlsx') %>% data.frame
for(i in 1:nrow(excel_parametros)){
for(j in 1:length(excel_parametros)){
excel_parametros[i,j] <- str_replace_all(excel_parametros[i,j],' ','_')
}
}
parametros <- list()
parametros$domestico_fechas = excel_parametros %>%
dplyr::filter(!is.na(domestico_fechas)) %>%
dplyr::select(domestico_fechas) %>%
unlist
parametros$usa_fechas = excel_parametros %>%
dplyr::filter(!is.na(usa_fechas)) %>%
dplyr::select(usa_fechas) %>%
unlist
parametros$row_fechas = excel_parametros %>%
dplyr::filter(!is.na(row_fechas)) %>%
dplyr::select(row_fechas) %>%
unlist
parametros$domestico_cantidades = excel_parametros %>%
dplyr::filter(!is.na(domestico_cantidades)) %>%
dplyr::select(domestico_cantidades) %>%
unlist
parametros$usa_cantidades = excel_parametros %>%
dplyr::filter(!is.na(usa_cantidades)) %>%
dplyr::select(usa_cantidades) %>%
unlist
parametros$row_cantidades = excel_parametros %>%
dplyr::filter(!is.na(row_cantidades)) %>%
dplyr::select(row_cantidades) %>%
unlist
parametros$domestico_filtros = excel_parametros %>%
dplyr::filter(!is.na(domestico_filtros)) %>%
dplyr::select(domestico_filtros) %>%
unlist
parametros$usa_filtros = excel_parametros %>%
dplyr::filter(!is.na(usa_filtros)) %>%
dplyr::select(usa_filtros) %>%
unlist
parametros$row_filtros = excel_parametros %>%
dplyr::filter(!is.na(row_filtros)) %>%
dplyr::select(row_filtros) %>%
unlist
parametros$usa_carpeta = excel_parametros %>%
dplyr::filter(!is.na(usa_carpeta)) %>%
dplyr::select(usa_carpeta) %>%
unlist
parametros$row_carpeta = excel_parametros %>%
dplyr::filter(!is.na(row_carpeta)) %>%
dplyr::select(row_carpeta) %>%
unlist
parametros$domestico_carpeta = excel_parametros %>%
dplyr::filter(!is.na(domestico_carpeta)) %>%
dplyr::select(domestico_carpeta) %>%
unlist
parametros$usa_pedido = excel_parametros %>%
dplyr::filter(!is.na(usa_pedido)) %>%
dplyr::select(usa_pedido) %>%
unlist
parametros$row_pedido = excel_parametros %>%
dplyr::filter(!is.na(row_pedido)) %>%
dplyr::select(row_pedido) %>%
unlist
parametros$domestico_pedido = excel_parametros %>%
dplyr::filter(!is.na(domestico_pedido)) %>%
dplyr::select(domestico_pedido) %>%
unlist
parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[',i,']] <- unique(tablas$',f_region,'$',eval(parse(text=paste0("parametros$",f_region,"_filtros[i]"))),')}'))
paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[',i,']] <- unique(tablas$',f_region,'$',eval(parse(text=paste0("parametros$",f_region,"_filtros[i]"))),')}')
parse(text=paste0("parametros$",f_region,"_filtros[i]"))
eval(parse(text=paste0("parametros$",f_region,"_filtros[i]")))
parametros$usa_filtros
parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[i]] <- unique(tablas$',f_region,'$',eval(parse(text=paste0("parametros$",f_region,"_filtros[i]"))),')}'))
paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[i]] <- unique(tablas$',f_region,'$parametros$',f_region,'_filtros[i])}')
parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[i]] <- unique(tablas$',f_region,'$parametros$',f_region,'_filtros[i])}'))
runApp()
if(input$input_filtro_zona == 'USA')f_region <- 'usa'
if(input$input_filtro_zona == 'Resto del mundo')f_region <- 'row'
if(input$input_filtro_zona == 'Doméstico')f_region <- 'domestico'
lista_opciones <- list()
eval(parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[i]] <- unique(tablas$',f_region,'$parametros$',f_region,'_filtros[i])}')))
f_region <- 'usa'
lista_opciones <- list()
eval(parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[i]] <- unique(tablas$',f_region,'$parametros$',f_region,'_filtros[i])}')))
tablas <- list()
library(shinydashboard)
library(stringr)
library(shinyWidgets)
library(readr)
library(readxl)
library(ggplot2)
library(lubridate)
library(formattable)
library(plyr)
library(dplyr)
library(RColorBrewer)
source('gs.R', encoding = "UTF-8")
# source('proceso.R', encoding = "UTF-8")
# source('grafica_fill_rate.R', encoding = "UTF-8")
# source('mapa.R', encoding = "UTF-8")
source('funciones_de_carga.R', encoding = "UTF-8")
source('funciones_graficas.R', encoding = "UTF-8")
source('funciones_interfaz.R', encoding = "UTF-8")
excel_parametros <- read_excel('datos/setup/parametros.xlsx') %>% data.frame
for(i in 1:nrow(excel_parametros)){
for(j in 1:length(excel_parametros)){
excel_parametros[i,j] <- str_replace_all(excel_parametros[i,j],' ','_')
}
}
parametros <- list()
parametros$domestico_fechas = excel_parametros %>%
dplyr::filter(!is.na(domestico_fechas)) %>%
dplyr::select(domestico_fechas) %>%
unlist
parametros$usa_fechas = excel_parametros %>%
dplyr::filter(!is.na(usa_fechas)) %>%
dplyr::select(usa_fechas) %>%
unlist
parametros$row_fechas = excel_parametros %>%
dplyr::filter(!is.na(row_fechas)) %>%
dplyr::select(row_fechas) %>%
unlist
parametros$domestico_cantidades = excel_parametros %>%
dplyr::filter(!is.na(domestico_cantidades)) %>%
dplyr::select(domestico_cantidades) %>%
unlist
parametros$usa_cantidades = excel_parametros %>%
dplyr::filter(!is.na(usa_cantidades)) %>%
dplyr::select(usa_cantidades) %>%
unlist
parametros$row_cantidades = excel_parametros %>%
dplyr::filter(!is.na(row_cantidades)) %>%
dplyr::select(row_cantidades) %>%
unlist
parametros$domestico_filtros = excel_parametros %>%
dplyr::filter(!is.na(domestico_filtros)) %>%
dplyr::select(domestico_filtros) %>%
unlist
parametros$usa_filtros = excel_parametros %>%
dplyr::filter(!is.na(usa_filtros)) %>%
dplyr::select(usa_filtros) %>%
unlist
parametros$row_filtros = excel_parametros %>%
dplyr::filter(!is.na(row_filtros)) %>%
dplyr::select(row_filtros) %>%
unlist
parametros$usa_carpeta = excel_parametros %>%
dplyr::filter(!is.na(usa_carpeta)) %>%
dplyr::select(usa_carpeta) %>%
unlist
parametros$row_carpeta = excel_parametros %>%
dplyr::filter(!is.na(row_carpeta)) %>%
dplyr::select(row_carpeta) %>%
unlist
parametros$domestico_carpeta = excel_parametros %>%
dplyr::filter(!is.na(domestico_carpeta)) %>%
dplyr::select(domestico_carpeta) %>%
unlist
parametros$usa_pedido = excel_parametros %>%
dplyr::filter(!is.na(usa_pedido)) %>%
dplyr::select(usa_pedido) %>%
unlist
parametros$row_pedido = excel_parametros %>%
dplyr::filter(!is.na(row_pedido)) %>%
dplyr::select(row_pedido) %>%
unlist
parametros$domestico_pedido = excel_parametros %>%
dplyr::filter(!is.na(domestico_pedido)) %>%
dplyr::select(domestico_pedido) %>%
unlist
tablas$usa <- funcion_cargar_datos(parametros$usa_carpeta,parametros$usa_fechas,parametros$usa_cantidades,parametros$usa_filtros,parametros$usa_pedido) %>%
dplyr::filter(!is.na(Zona_de_ventas)) %>%
dplyr::filter(Nombre_Región == 'USA')
tablas$row <- funcion_cargar_datos(parametros$row_carpeta,parametros$row_fechas,parametros$row_cantidades,parametros$row_filtros,parametros$row_pedido) %>%
dplyr::filter(!is.na(Zona_de_ventas)) %>%
dplyr::filter(Nombre_Región != 'USA')
tablas$domestico <- funcion_cargar_datos(parametros$domestico_carpeta,parametros$domestico_fechas,parametros$domestico_cantidades,parametros$domestico_filtros,parametros$domestico_pedido)
lista_opciones <- list()
eval(parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[i]] <- unique(tablas$',f_region,'$parametros$',f_region,'_filtros[i])}')))
lista_opciones[[1]]
parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[i]] <- unique(tablas$',f_region,'$parametros$',f_region,'_filtros[i])}'))
eval(parse(text=paste0(
'parametros$',f_region,'_filtros'
)))
eval(parse(text=paste0(
'a <- parametros$',f_region,'_filtros'
)))
parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[i]] <- unique(tablas$',f_region,'$parametros$',a[i],')}'))
eval(parse(text=paste0(
'a <- parametros$',f_region,'_filtros'
)))
eval(parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[i]] <- unique(tablas$',f_region,'$parametros$',a[i],')}')))
parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[i]] <- unique(tablas$',f_region,'$parametros$',a[i],')}'))
parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[i]] <- unique(tablas$',f_region,'$parametros$',a,'[i])}'))
parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
lista_opciones[[i]] <- unique(tablas$',f_region,'$parametros$',f_region,'_filtros[i])}'))
parse(text=paste0('
for(i in 1:length(parametros$',f_region,'_filtros)){
a <- ',f_region,'_filtros[i]
lista_opciones[[i]] <- unique(tablas$',f_region,'$parametros$',a,')}'))
parse(text=paste0('
lista_opciones[[i]] <- unique(tablas$',f_region,'$parametros$',a,')'))
parse(text=paste0('
lista_opciones[[',1:3,']] <- unique(tablas$',f_region,'$parametros$',a,')'))
lista_opciones <- list()
eval(parse(text=paste0('lista_opciones[[',1:3,']] <- unique(tablas$',f_region,'$parametros$',a,')')))
lista_opciones <- list()
eval(parse(text=paste0('lista_opciones[[',1:3,']] <- unique(tablas$',f_region,'$parametros$',a,')')))
parse(text=paste0('lista_opciones[[',1:3,']] <- unique(tablas$',f_region,'$parametros$',a,')'))
eval(parse(text=paste0('lista_opciones[[',1:3,']] <- unique(tablas$',f_region,'$parametros$',a,')',collapse = '\n')))
parse(text=paste0('lista_opciones[[',1:3,']] <- unique(tablas$',f_region,'$parametros$',a,')',collapse = '\n'))
paste0('lista_opciones[[',1:3,']] <- unique(tablas$',f_region,'$parametros$',a,')',collapse = '\n')
a<-1,b<-2
a<-1;b<-2
eval(parse(text=paste0('lista_opciones[[',1:3,']] <- unique(tablas$',f_region,'$parametros$',a,')',collapse = ';')))
parse(text=paste0('lista_opciones[[',1:3,']] <- unique(tablas$',f_region,'$parametros$',a,')',collapse = ';'))
